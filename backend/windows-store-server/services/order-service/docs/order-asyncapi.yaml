asyncapi: 2.6.0
info:
  title: Order Service AsyncAPI
  version: 0.1.0
channels:
  order.events:
    subscribe:
      summary: Order lifecycle events
      message:
        $ref: '#/components/messages/OrderEvent'
  payment.events:
    subscribe:
      summary: Payment events
      message:
        $ref: '#/components/messages/PaymentEvent'
components:
  messages:
    OrderEvent:
      name: OrderCreated
      payload:
        type: object
        required: [eventId, orderId, status, occurredAt]
        properties:
          eventId: { type: string, format: uuid }
          orderId: { type: string, format: uuid }
          status: { type: string }
          occurredAt: { type: string, format: date-time }
    PaymentEvent:
      name: PaymentApplied
      payload:
        type: object
        required: [eventId, orderId, paymentId, status, amount, currency, occurredAt]
        properties:
          eventId: { type: string, format: uuid }
          orderId: { type: string, format: uuid }
          paymentId: { type: string, format: uuid }
          status: { type: string }
          amount: { type: number }
          currency: { type: string }
          occurredAt: { type: string, format: date-time }
