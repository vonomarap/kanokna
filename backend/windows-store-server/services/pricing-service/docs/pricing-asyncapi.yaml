asyncapi: 2.6.0
info:
  title: Pricing Service AsyncAPI
  version: 0.1.0
  description: Outbound pricing events.
defaultContentType: application/json
channels:
  pricing.updated:
    subscribe:
      summary: Pricing update event for downstream consumers
      message:
        $ref: '#/components/messages/PricingUpdated'
components:
  messages:
    PricingUpdated:
      name: PricingUpdated
      title: Pricing Updated
      summary: Emitted when a quote is calculated or price book changes.
      payload:
        type: object
        required: [eventId, priceBookId, priceBookVersion, quoteId, total, currencyCode, occurredAt]
        properties:
          eventId:
            type: string
            format: uuid
          priceBookId:
            type: string
            format: uuid
          priceBookVersion:
            type: integer
          quoteId:
            type: string
            format: uuid
          total:
            type: number
            format: double
          currencyCode:
            type: string
          occurredAt:
            type: string
            format: date-time
